mixed-port: 7890
allow-lan: true
bind-address: '*'
log-level: info
mode: rule
ipv6: true
profile:
  store-selected: false
  store-fake-ip: true

subscribe-url: <suburl> # Here's a network service provider recommended. https://s.godyax.work/#/register?code=apc0YX7Y

proxy-groups:
- name: $tash
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/network.png
  type: select
  url: http://captive.apple.com
  interval: 600
  proxies:
    - Select
    - Auto
    - Load Balance
    - Fallback
  
- name: Select
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/select.png
  type: select
  url: http://captive.apple.com
  interval: 600
  use-url:
    - <suburl>
  
- name: Auto
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/urltest.png
  type: url-test
  url: http://captive.apple.com
  interval: 600
  use-url:
    - <suburl>
  
- name: Fallback
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/fallback.png
  type: fallback
  url: http://captive.apple.com
  interval: 600
  use-url:
    - <suburl>
  
- name: Load Balance
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/loadbalance.png
  type: load-balance
  strategy: consistent-hashing  # round-robin
  url: http://captive.apple.com
  interval: 600
  use-url:
    - <suburl>
    
- name: Social Media
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/socialmedia.png
  type: select
  url: http://captive.apple.com
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - <suburl>
    
- name: Streaming
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/streaming.png
  type: select
  url: http://captive.apple.com
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - <suburl>
    
- name: Shopping
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/shopping.png
  type: select
  url: http://captive.apple.com
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - <suburl>
    
- name: Match
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/global.png
  type: select
  url: http://captive.apple.com
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - <suburl>
  
rules:
- GEOIP,CN,DIRECT
- MATCH,$tash
