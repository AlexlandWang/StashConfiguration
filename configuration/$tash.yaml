mixed-port: 7890
allow-lan: true
bind-address: '*'
log-level: info
mode: rule
ipv6: true
profile:
  store-selected: false
  store-fake-ip: true

subscribe-url: &suburl <suburl> # https://s.godyax.work/#/register?code=apc0YX7Y, a network service provider recommended.

proxy-groups:
- name: $tash
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/network.png
  type: select
  url: &pingurl http://captive.apple.com
  # Apple: http://captive.apple.com
  # Google: http://www.gstatic.com/generate_204
  # Microsoft: http://www.msftconnecttest.com/connecttest.txt
  # Cloudflare:http://cp.cloudflare.com
  # V2EX:http://www.v2ex.com/generate_204
  interval: 600
  proxies:
    - Select
    - Auto
    - Load Balance
    - Fallback
  
- name: Select
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/select.png
  type: select
  url: *pingurl
  interval: 600
  use-url:
    - *suburl
  
- name: Auto
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/urltest.png
  type: url-test
  url: *pingurl
  interval: 600
  use-url:
    - *suburl
  
- name: Fallback
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/fallback.png
  type: fallback
  url: *pingurl
  interval: 600
  use-url:
    - *suburl
  
- name: Load Balance
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/loadbalance.png
  type: load-balance
  strategy: consistent-hashing  # round-robin
  url: *pingurl
  interval: 600
  use-url:
    - *suburl
    
- name: Social Media
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/socialmedia.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - <suburl>
    
- name: Streaming
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/streaming.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - *suburl
    
- name: Gaming
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/game.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - *suburl
    
- name: Shopping
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/shopping.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - *suburl
    
- name: Shield
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/shield.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - REJECT
    
- name: Match
  icon: https://raw.githubusercontent.com/shindgewongxj/WHATSINStash/main/icon/global.png
  type: select
  url: *pingurl
  interval: 600
  proxies:
    - $tash
    - Select
    - Auto
    - Load Balance
    - Fallback
  use-url:
    - *suburl
  
rules:
- GEOIP,CN,DIRECT
- MATCH,$tash
